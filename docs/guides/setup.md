# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ DNA-utils-universal

–ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Å–∏—Å—Ç–µ–º—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.

## ‚öôÔ∏è –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (–æ–±–Ω–æ–≤–ª–µ–Ω–æ –∞–≤–≥—É—Å—Ç 2025) ‚≠ê
- **OS**: Windows 10+, macOS 10.15+, Linux (Ubuntu 18.04+)
- **Node.js**: >= 16.0.0
- **npm**: >= 8.0.0  
- **RAM**: 4GB (–ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π —Å–∏—Å—Ç–µ–º—ã –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ)
- **Disk**: 2GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- **CPU**: 2 cores (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –ª—é–±—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤)

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (–¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤) ‚≠ê –û–ë–ù–û–í–õ–ï–ù–û
- **RAM**: 8GB (–¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ 150k+ –ø—Ä–æ—Ñ–∏–ª–µ–π)
- **CPU**: 4+ cores (–¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è batch –æ–±—Ä–∞–±–æ—Ç–∫–∏)
- **SSD**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è IndexedDB –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ò–Ω—Ç–µ—Ä–Ω–µ—Ç**: –°—Ç–∞–±–∏–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤ ‚≠ê –ù–û–í–û–ï
- **–î–æ 10k –ø—Ä–æ—Ñ–∏–ª–µ–π**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞ < 5 —Å–µ–∫—É–Ω–¥
- **–î–æ 50k –ø—Ä–æ—Ñ–∏–ª–µ–π**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞ < 15 —Å–µ–∫—É–Ω–¥
- **–î–æ 150k –ø—Ä–æ—Ñ–∏–ª–µ–π**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞ < 30 —Å–µ–∫—É–Ω–¥  
- **300k+ –ø—Ä–æ—Ñ–∏–ª–µ–π**: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ 60 —Å–µ–∫—É–Ω–¥)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **Python**: >= 3.8 (–¥–ª—è ystr_predictor)
- **Git**: –¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- **PM2**: –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

## üöÄ –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/valalav/DNA-utils-universal.git
cd DNA-utils-universal
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# –ö–æ—Ä–Ω–µ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤—Å–µ—Ö –ø–æ–¥–ø—Ä–æ–µ–∫—Ç–æ–≤
npm run install:all
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –ø–æ–¥ –≤–∞—à–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏
```

### 4. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
```bash
npm run dev
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π** ‚≠ê –ù–û–í–û–ï:
- **STR Matcher**: http://localhost:9002 (–¥–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –∑–∞ < 3 —Å–µ–∫—É–Ω–¥)
- **FTDNA Haplo API**: http://localhost:9003/api/health
- **Haplo Client**: http://localhost:5173

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** ‚≠ê –ù–û–í–û–ï:
1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª (–≤–∫–ª—é—á–µ–Ω –≤ str-matcher/test-data-1.csv)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ç–æ–∫–æ–≤—É—é –∑–∞–≥—Ä—É–∑–∫—É - –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –ø—Ä–æ–≥—Ä–µ—Å—Å
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–∏—Å–∫ - —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –æ—Ç–∑—ã–≤—á–∏–≤–æ–π
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –≤ DevTools (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å < 100MB)

## üîß –î–µ—Ç–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã

#### Windows
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js —á–µ—Ä–µ–∑ winget
winget install OpenJS.NodeJS

# –ò–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞
# https://nodejs.org/
```

#### macOS
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ Homebrew
brew install node

# –ò–ª–∏ —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫
# https://nodejs.org/
```

#### Linux (Ubuntu/Debian)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js 18.x
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
node --version
npm --version
```

### –®–∞–≥ 2: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

#### –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/valalav/DNA-utils-universal.git
cd DNA-utils-universal

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
ls -la
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–∞–ø–∫–∏: str-matcher, ftdna_haplo, ystr_predictor, docs
```

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ—Ä–Ω–µ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install

# –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã:
# - cross-env: –¥–ª—è –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—ã
# - dotenv: –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å .env —Ñ–∞–π–ª–∞–º–∏  
# - pm2: –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
```

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø–æ–¥–ø—Ä–æ–µ–∫—Ç–æ–≤
```bash
# STR Matcher (Next.js)
cd str-matcher
npm install
cd ..

# FTDNA Haplo Server (Node.js)
cd ftdna_haplo/server
npm install  
cd ../..

# FTDNA Haplo Client (React/Vite)
cd ftdna_haplo/client
npm install
cd ../..

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm run check:dependencies
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
```bash
cp .env.example .env
```

#### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ .env
```bash
# .env
NODE_ENV=development
HOST_IP=localhost

# API URLs –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
DEV_API_URL=http://localhost:9003/api
PROD_API_URL=https://your-domain.com/api

# CORS origins
DEV_ALLOWED_ORIGINS=http://localhost:9002,http://localhost:5173
PROD_ALLOWED_ORIGINS=https://your-domain.com,https://haplo.your-domain.com

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
DEBUG=true
LOG_LEVEL=info
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥

**Development (.env.development)**:
```bash
NODE_ENV=development
HOST_IP=localhost
API_URL=http://localhost:9003/api
ALLOWED_ORIGINS=http://localhost:9002,http://localhost:5173
DEBUG=true
```

**Production (.env.production)**:
```bash
NODE_ENV=production
HOST_IP=0.0.0.0
API_URL=https://api.yourdomain.com/api
ALLOWED_ORIGINS=https://yourdomain.com,https://haplo.yourdomain.com
DEBUG=false
```

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∞–Ω–Ω—ã—Ö

#### –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö FTDNA/YFull
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
mkdir -p ftdna_haplo/data

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã)
cd ftdna_haplo/data
wget https://example.com/test-data/get.json
wget https://example.com/test-data/ytree.json
cd ../..
```

**–í–∞–∂–Ω–æ**: –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ FTDNA –∏ YFull —Ç—Ä–µ–±—É—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –ª–∏—Ü–µ–Ω–∑–∏–π. –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ.

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
```json
// ftdna_haplo/data/get.json - FTDNA –¥–µ—Ä–µ–≤–æ
{
  "allNodes": {
    "1": {
      "haplogroupId": "1",
      "name": "A0-T",
      "variants": [{"variant": "M91"}],
      "children": ["2", "3"]
    }
  }
}

// ftdna_haplo/data/ytree.json - YFull –¥–µ—Ä–µ–≤–æ  
{
  "id": "A0-T",
  "snps": "M91,P97",
  "formed": 200000,
  "tmrca": 200000,
  "children": [...]
}
```

## üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

#### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
npm run dev

# –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ:
# pm2 start ecosystem.config.js
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
# –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
npm run status
# –∏–ª–∏
pm2 list

# –õ–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
npm run logs
# –∏–ª–∏  
pm2 logs

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
pm2 logs str-matcher-2
pm2 logs ftdna-haplo-2
pm2 logs haplo-client
```

#### –ó–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```bash
# –¢–æ–ª—å–∫–æ STR Matcher
cd str-matcher
npm run dev
# –î–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:9002

# –¢–æ–ª—å–∫–æ FTDNA Haplo API
cd ftdna_haplo
node server/server.js
# –î–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:9003

# –¢–æ–ª—å–∫–æ Haplo Client
cd ftdna_haplo/client  
npm run dev
# –î–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:5173
```

### –†–µ–∂–∏–º –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

#### –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```bash
npm run build

# –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è:
# - npm run build:str-matcher (Next.js build)
# - npm run build:haplo-client (Vite build)
```

#### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
```bash
npm start

# –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ:
# cross-env NODE_ENV=production pm2 start ecosystem.config.js
```

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### Health Checks

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```bash
npm run health-check
```

#### –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```bash
# STR Matcher
curl http://localhost:9002
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å HTML —Å—Ç—Ä–∞–Ω–∏—Ü—É

# FTDNA Haplo API
curl http://localhost:9003/api/health
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"status":"ok","timestamp":"2025-08-01T..."}

# Haplo Client
curl http://localhost:5173
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å HTML —Å—Ç—Ä–∞–Ω–∏—Ü—É Vite
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

#### –¢–µ—Å—Ç API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
```bash
# –ü–æ–∏—Å–∫ –≥–∞–ø–ª–æ–≥—Ä—É–ø–ø—ã
curl "http://localhost:9003/api/search/R-M269"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É–±–∫–ª–∞–¥–æ–≤
curl -X POST "http://localhost:9003/api/check-subclade" \
  -H "Content-Type: application/json" \
  -d '{"haplogroup":"R-L23","parentHaplogroup":"R-M269"}'

# –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
curl "http://localhost:9003/api/autocomplete?term=R-M"
```

#### –¢–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ STR Matcher ‚Üî FTDNA Haplo
```bash
# –û—Ç–∫—Ä—ã—Ç—å STR Matcher
open http://localhost:9002

# 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
# 2. –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫ –ø–æ Kit Number
# 3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –ø–æ –≥–∞–ø–ª–æ–≥—Ä—É–ø–ø–µ —Å –≤–∫–ª—é—á–µ–Ω–∏–µ–º —Å—É–±–∫–ª–∞–¥–æ–≤
# 4. –ö–ª–∏–∫–Ω—É—Ç—å –ø–æ –≥–∞–ø–ª–æ–≥—Ä—É–ø–ø–µ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö
# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ —Å –ø—É—Ç—è–º–∏ FTDNA/YFull
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### –ü–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–Ω—è—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤
netstat -tulpn | grep :9002
netstat -tulpn | grep :9003  
netstat -tulpn | grep :5173

# –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤
sudo pkill -f "node.*9002"
sudo pkill -f "node.*9003"
sudo pkill -f "node.*5173"

# –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç—ã –≤ .env
```

#### Node.js –≤–µ—Ä—Å–∏—è –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏
node --version

# –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å >= 16.0.0
# –ï—Å–ª–∏ –Ω–µ—Ç, –æ–±–Ω–æ–≤–∏—Ç–µ Node.js
```

#### npm –ø–∞–∫–µ—Ç—ã –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å
```bash
# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ npm
npm cache clean --force

# –£–¥–∞–ª–µ–Ω–∏–µ node_modules –∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞
rm -rf node_modules package-lock.json
npm install

# –¢–æ –∂–µ –¥–ª—è –ø–æ–¥–ø—Ä–æ–µ–∫—Ç–æ–≤
cd str-matcher && rm -rf node_modules package-lock.json && npm install && cd ..
cd ftdna_haplo/server && rm -rf node_modules package-lock.json && npm install && cd ../..
cd ftdna_haplo/client && rm -rf node_modules package-lock.json && npm install && cd ../..
```

#### CORS –æ—à–∏–±–∫–∏
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ .env
echo $ALLOWED_ORIGINS

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
curl http://localhost:9003/api/health

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ next.config.js –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ proxy
cat str-matcher/next.config.js
```

#### PM2 –ø—Ä–æ–±–ª–µ–º—ã
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ PM2
pm2 kill
npm run dev

# –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
pm2 show str-matcher-2
pm2 show ftdna-haplo-2
pm2 show haplo-client

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –æ—à–∏–±–æ–∫
pm2 logs --err
```

### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

#### –ì–¥–µ –Ω–∞–π—Ç–∏ –ª–æ–≥–∏
```bash
# PM2 –ª–æ–≥–∏
~/.pm2/logs/

# –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
tail -f ~/.pm2/logs/str-matcher-2-out.log
tail -f ~/.pm2/logs/ftdna-haplo-2-error.log
```

#### Debug —Ä–µ–∂–∏–º
```bash
# –í–∫–ª—é—á–µ–Ω–∏–µ debug –ª–æ–≥–æ–≤
DEBUG=* npm run dev

# –ò–ª–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
DEBUG=express:* npm run dev
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

#### HTTPS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è self-signed —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 365 -nodes

# –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Let's Encrypt –∏–ª–∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
```

#### Firewall –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```bash
# Ubuntu/Debian
sudo ufw allow 22      # SSH
sudo ufw allow 80      # HTTP
sudo ufw allow 443     # HTTPS
sudo ufw enable

# –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –ø–æ—Ä—Ç–∞–º
sudo ufw deny 9002
sudo ufw deny 9003
sudo ufw deny 5173

# –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ reverse proxy (nginx/apache)
```

#### Environment variables
```bash
# –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ .env —Ñ–∞–π–ª—ã —Å —Å–µ–∫—Ä–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
echo ".env" >> .gitignore
echo ".env.local" >> .gitignore
echo ".env.production" >> .gitignore
```

## üì¶ Docker —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### Dockerfile –¥–ª—è STR Matcher
```dockerfile
FROM node:18-alpine

WORKDIR /app

COPY str-matcher/package*.json ./
RUN npm ci --only=production

COPY str-matcher .
RUN npm run build

EXPOSE 9002
CMD ["npm", "start"]
```

### Docker Compose
```yaml
# docker-compose.yml
version: '3.8'

services:
  str-matcher:
    build:
      context: .
      dockerfile: str-matcher/Dockerfile
    ports:
      - "9002:9002"
    environment:
      - NODE_ENV=production
      - NEXT_PUBLIC_API_URL=http://ftdna-haplo:9003/api
    depends_on:
      - ftdna-haplo

  ftdna-haplo:
    build:
      context: .
      dockerfile: ftdna_haplo/Dockerfile
    ports:
      - "9003:9003"
    environment:
      - NODE_ENV=production
      - PORT=9003
    volumes:
      - ./ftdna_haplo/data:/app/data
```

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker
```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
docker-compose up --build

# –í —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –ø–∞–∫–µ—Ç–æ–≤
npm outdated

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ø–æ–¥–ø—Ä–æ–µ–∫—Ç–∞—Ö
cd str-matcher && npm update && cd ..
cd ftdna_haplo/server && npm update && cd ../..
cd ftdna_haplo/client && npm update && cd ../..
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è
```bash
# –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
git pull origin main
npm install
npm run build
npm run migrate  # –µ—Å–ª–∏ –µ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
npm restart
```

---

*–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ: –ê–≤–≥—É—Å—Ç 2025*